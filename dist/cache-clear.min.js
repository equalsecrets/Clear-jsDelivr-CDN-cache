!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["cache-clear"]=e():t["cache-clear"]=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e.default=s.a},function(t,e,n){"use strict";const r=window.kiln.utils.components.navMenuButton;t.exports={data:()=>({}),methods:{openNav(){this.$store.dispatch("openNav","cache-clear")}},components:{navMenuButton:r}}},function(t,e,n){"use strict";n.r(e);var r=n(3),s=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e.default=s.a},function(t,e,n){"use strict";const r=n(9),{MIN_LINKS_LENGTH:s}=n(6),{UiTextbox:o,UiIcon:a,UiButton:i}=window.kiln.utils.components;t.exports={data:()=>({requesting:!1,links:["",""],results:[]}),components:{UiTextbox:o,UiButton:i},methods:{fieldChanged(){this.links.filter(t=>!t).length<s&&this.links.push("")},clearAsset(t){const e=this.links.filter(t=>!!t).map(r);t.preventDefault(),this.requesting=!0,Promise.all(e).then(t=>t.map(t=>(t.status||(t.status="error"),t))).then(t=>{this.requesting=!1,this.results=t})},reset(){this.links=["",""],this.results=[]}}}},function(t,e,n){var r=n(14);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(16).default)("3a9fd776",r,!0,{})},function(t,e,n){"use strict";function r(t,e,n,r,s,o,a,i){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):s&&(c=i?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:u}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";t.exports={FASTLY_API_URL:"https://api.fastly.com/purge",MAX_CLEAR_TIME:200,MIN_LINKS_LENGTH:2}},function(t,e,n){"use strict";var r=function(){var t=this.$createElement;return(this._self._c||t)("nav-menu-button",{attrs:{id:"cache-clear",icon:"cached"},on:{"nav-click":this.openNav}},[this._v("Clear Cache")])},s=[];n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}))},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cache-clear-container"},[0===t.results.length?n("div",{staticClass:"cache-clear-front"},[n("h1",[t._v("Clear Cache")]),t._v(" "),n("p",{staticClass:"clear-cache-instructions"},[t._v('Add urls to the list whose cache should be cleared and then press the "Clear" button below.')]),t._v(" "),n("form",{on:{submit:t.clearAsset}},[n("ol",{staticClass:"cache-clear-list"},t._l(t.links,(function(e,r){return n("li",{key:r,staticClass:"cache-clear-list-item"},[n("ui-textbox",{staticClass:"form-element",attrs:{label:"Url",type:"url","floating-label":""},on:{blur:t.fieldChanged,"keydown-enter":t.clearAsset},model:{value:t.links[r],callback:function(e){t.$set(t.links,r,e)},expression:"links[index]"}})],1)})),0),t._v(" "),n("ui-button",{attrs:{color:"primary",buttonType:"submit"}},[t._v("Clear")])],1)]):n("div",{staticClass:"cache-clear-results"},[n("h1",[t._v("Results")]),t._v(" "),n("ol",{staticClass:"cache-clear-list"},t._l(t.results,(function(e,r){return n("li",{key:r,staticClass:"cache-clear-list-item"},[n("span",{staticClass:"cache-clear-status",class:e.status},[t._v(t._s(e.status))]),t._v(": "),n("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.url))])])})),0),t._v(" "),n("ui-button",{attrs:{color:"primary",loading:t.loading,buttonType:"button"},on:{click:t.reset}},[t._v("Done")])],1)])},s=[];n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}))},function(t,e,n){"use strict";const{FASTLY_API_URL:r}=n(6);t.exports=function(t){return window.process.env.FASTLY_API_KEY?function(t){return fetch(`${r}/${t}`,{method:"POST",headers:{"Fastly-Key":window.process.env.FASTLY_API_KEY}}).then(t=>t.json()).then(e=>(e.url=t,e))}(t):function(t){return fetch(t,{method:"PURGE"}).then(t=>t.json()).then(e=>(e.url=t,e))}(t)}},function(t,e,n){"use strict";const r=n(9),{MAX_CLEAR_TIME:s}=n(6);t.exports={NavButton:n(11).default,NavContent:n(12).default,CacheClearPlugin:function(t){t.subscribe((t,e)=>{const n=t&&t.payload&&t.payload.publishTime;if("UPDATE_PAGE_STATE"===t.type&&n){if((new Date).getTime()-new Date(n).getTime()<s){const t=e.page.state.url||"";r(t).then(()=>console.log(`Purged url: ${t}`))}}})}}},function(t,e,n){"use strict";n.r(e);var r=n(7),s=n(0);for(var o in s)"default"!==o&&function(t){n.d(e,t,(function(){return s[t]}))}(o);var a=n(5),i=Object(a.a)(s.default,r.a,r.b,!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=n(8),s=n(2);for(var o in s)"default"!==o&&function(t){n.d(e,t,(function(){return s[t]}))}(o);n(13);var a=n(5),i=Object(a.a)(s.default,r.a,r.b,!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";var r=n(4);n.n(r).a},function(t,e,n){(t.exports=n(15)(!1)).push([t.i,'.cache-clear-container.nav-content {\n  font-family: "Noto Sans", Arial, sans-serif;\n  max-width: 400px;\n  overflow-y: auto;\n  padding: 10px 30px;\n  width: inherit;\n}\n.clear-cache-instructions {\n  font-size: 18px;\n}\n.cache-clear-list {\n  list-style: none;\n  padding: 0;\n}\n.cache-clear-list-item + .cache-clear-list-item {\n  margin: 10px 0 0 0;\n}\n.cache-clear-status {\n  color: green;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n.cache-clear-status.error {\n  color: red;\n}\n',""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var s=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[n].concat(o).concat([s]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(s=0;s<t.length;s++){var a=t[s];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},s=0;s<e.length;s++){var o=e[s],a=o[0],i={id:t+":"+s,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(i):n.push(r[a]={id:a,parts:[i]})}return n}n.r(e),n.d(e,"default",(function(){return p}));var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=s&&(document.head||document.getElementsByTagName("head")[0]),i=null,c=0,u=!1,l=function(){},f=null,d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,n,s){u=n,f=s||{};var a=r(t,e);return h(a),function(e){for(var n=[],s=0;s<a.length;s++){var i=a[s];(c=o[i.id]).refs--,n.push(c)}e?h(a=r(t,e)):a=[];for(s=0;s<n.length;s++){var c;if(0===(c=n[s]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete o[c.id]}}}}function h(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](n.parts[s]);for(;s<n.parts.length;s++)r.parts.push(m(n.parts[s]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(m(n.parts[s]));o[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function m(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(d){var s=c++;r=i||(i=v()),e=b.bind(null,r,s,!1),n=b.bind(null,r,s,!0)}else r=v(),e=y.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var _,g=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function b(t,e,n,r){var s=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,s);else{var o=document.createTextNode(s),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function y(t,e){var n=e.css,r=e.media,s=e.sourceMap;if(r&&t.setAttribute("media",r),f.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}])}));